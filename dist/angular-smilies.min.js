/*!
 * Angular Smilies 1.1.0
 * Copyright 2014 Damien "Mistic" Sorel (http://www.strangeplanet.fr)
 * Licensed under MIT (http://opensource.org/licenses/MIT)
 */
!function(){var a="smile",b=["biggrin","confused","cool","cry","eek","evil","like","lol","love","mad","mrgreen","neutral","question","razz","redface","rolleyes","sad","smile","surprised","thumbdown","thumbup","twisted","wink"],c={":D":"biggrin",":-D":"biggrin",":S":"confused",":-S":"confused",";(":"cry",";-(":"cry",OO:"eek","<3":"like","^^":"lol",":|":"neutral",":-|":"neutral",":P":"razz",":-P":"razz",":(":"sad",":-(":"sad",":)":"smile",":-)":"smile",":O":"surprised",":-O":"surprised",";)":"wink",";-)":"wink"},d=new RegExp(":("+b.join("|")+"):","g"),e='<i class="smiley-$1" title="$1"></i>',f=function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},g=function(a){return/^[a-z]+$/i.test(a)?new RegExp("\\b"+a+"\\b","gi"):new RegExp(f(a),"gi")},h=function(a){return e.replace("$1",a)},i=function(a){var b=a.replace(d,e);for(var f in c)c.hasOwnProperty(f)&&(b=b.replace(g(f),h(c[f])));return b};angular.module("angular-smilies",[]).filter("smilies",function(){return i}).directive("smilies",function(){return{restrict:"A",scope:{source:"=smilies"},link:function(a,b){b.html(i(a.source))}}}).directive("smiliesSelector",["$timeout",function(a){var c;try{angular.module("ui.bootstrap.popover"),c="template/smilies/button-a.html"}catch(d){try{angular.module("mgcrea.ngStrap.popover"),c="template/smilies/button-b.html"}catch(d){return console.error("No Popover module found"),{}}}return{restrict:"A",templateUrl:c,scope:{source:"=smiliesSelector",placement:"@smiliesPlacement",title:"@smiliesTitle"},link:function(c,d){c.smilies=b,c.append=function(b){c.source+=" :"+b+": ",a(function(){d.find("i").triggerHandler("click")})}}}}]).directive("focusOnChange",function(){return{restrict:"A",link:function(a,b,c){a.$watch(c.focusOnChange,function(){b[0].focus()})}}}).run(["$templateCache",function(b){b.put("template/smilies/button-a.html",'<i class="smiley-'+a+' smilies-selector" popover-template="template/smilies/popover-a.html" popover-placement="{{!placement && \'left\' || placement}}" popover-title="{{title}}"></i>'),b.put("template/smilies/button-b.html",'<i class="smiley-'+a+' smilies-selector" bs-popover data-template="template/smilies/popover-b.html" data-placement="{{!placement && \'left\' || placement}}" title="{{title}}"></i>'),b.put("template/smilies/popover-a.html",'<div ng-model="smilies" class="smilies-selector-content"><i class="smiley-{{smiley}}" ng-repeat="smiley in smilies" ng-click="append(smiley)"></i></div>'),b.put("template/smilies/popover-b.html",'<div class="popover" tabindex="-1"><div class="arrow"></div><h3 class="popover-title" ng-bind-html="title" ng-show="title"></h3><div class="popover-content">'+b.get("template/smilies/popover-a.html")+"</div></div>")}])}();